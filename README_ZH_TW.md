[ç®€ä½“ä¸­æ–‡](README.md) | ç¹é«”ä¸­æ–‡ | [English](README_EN.md)

<div align="center">
  <img src="docs/icon.png" alt="App åœ–ç¤º" width="100" />
  <h1>RikkaHubX</h1>

> [!WARNING] é€™ä¸æ˜¯å—åˆ° RikkaHubå®˜æ–¹ æ”¯æ´çš„ç‰ˆæœ¬ï¼

èˆ‡åŸå°ˆæ¡ˆæœ‰é—œçš„å…§å®¹è«‹å‰å¾€[RikkaHub-Github](https://github.com/rikkahub/rikkahub)

ä¸€å€‹åŸç”ŸAndroid LLM èŠå¤©å®¢æˆ¶ç«¯ï¼Œæ”¯æ´åˆ‡æ›ä¸åŒçš„ä¾›æ‡‰å•†é€²è¡ŒèŠå¤© ğŸ¤–ğŸ’¬




æœ¬å°ˆæ¡ˆForkè‡ªRikkaHub 1.6.15ï¼Œæœ¬å°ˆæ¡ˆæ”¯æ´å°æ–¼æœ¬å°ˆæ¡ˆçš„PRï¼ˆèªªæ˜æ¸…æ¥šï¼Œæ²’ç—…æ¯’å°±è¡Œï¼Œå› ç‚ºæˆ‘æ‡¶ï¼‰

RikkaHubXçš„ä½œè€…æ˜¯å¤§é™¸äººï¼Œäº¤æµæœ€å¥½ç”¨ç°¡é«”ä¸­æ–‡



RikkaHubXæ˜¯RikkaHubçš„ç¨ç«‹åˆ†æ”¯ï¼Œåœ¨RikkaHubçš„åŸºç¤ä¸Šæ·»åŠ äº†éƒ¨åˆ†ä¿®æ”¹åŠŸèƒ½ï¼Œä¸æœƒæäº¤PRçµ¦åŸå°ˆæ¡ˆ

[RikkaHubX](https://github.com/wanxiaoT/rikkahubx) By [wanxiaoT](https://github.com/wanxiaoT)

# v1.6.18

æ„Ÿè¬ [Kelivo](https://github.com/Chevey339/kelivo/) æä¾›çš„å¤š Key ç®¡ç†åŠŸèƒ½ç¤ºä¾‹ç¨‹å¼ç¢¼

æª”æ¡ˆè·¯å¾‘             | èªªæ˜
-------|--------------------
kelivo-master\lib\core\models\api_keys.dart | è³‡æ–™æ¨¡å‹ - å®šç¾©æ ¸å¿ƒè³‡æ–™çµæ§‹
kelivo-master\lib\core\services\api_key_manager.dart | æ ¸å¿ƒæœå‹™ - Key é¸æ“‡é‚è¼¯å’Œç‹€æ…‹æ›´æ–°
kelivo-master\lib\features\provider\pages\multi_key_manager_page.dart | UI é é¢ - å¤š Key ç®¡ç†ä»‹é¢

å¤šKeyè¼ªè©¢åœ¨é€™å€‹ç‰ˆæœ¬è£¡é¢ä¸èƒ½æ­£ç¢ºä½¿ç”¨åˆ°èŠå¤©ä¸­ï¼Œé€™å€‹ç‰ˆæœ¬çš„å¯†é‘°å¥åº·åº¦æª¢æ¸¬ä¹Ÿæ˜¯å–®åŸ·è¡Œç·’çš„ï¼Œè«‹æŸ¥çœ‹1.6.22ç‰ˆæœ¬


# v1.6.19

| åºè™Ÿ | æ›´æ–°å…§å®¹ |
|:---:|----------|
| 1 | å¾ rikkahub å®˜æ–¹ v1.6.16 æå– token/tps è¨˜éŒ„åŠŸèƒ½æ’å…¥æ–°ç‰ˆåŸå§‹ç¢¼ |
| 2 | ä¿®å¾©å­˜åœ¨å•é¡Œçš„ base64 åœ–ç‰‡å‚³è¼¸ï¼Œè½‰ç‚ºä½¿ç”¨æª”æ¡ˆå„²å­˜ã€‚åŸæœ‰ç‰ˆæœ¬çš„åœ–ç‰‡åœ¨æœ¬åœ°æ˜¯ç”¨ SQL è³‡æ–™åº«å­˜çš„ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯ä¸æ˜¯çœŸçš„ä¿®å¾©äº†ï¼Œé‚„å¾—ä½¿ç”¨è€…è‡ªå·±æ¸¬è©¦ï¼Œå› ç‚ºæˆ‘æ²’æœ‰ç•«åœ–çš„ api |



# v1.6.20
æ„Ÿè¬ [CherryStudio v1.7.5](https://github.com/Chevey339/kelivo/) æä¾›çš„å¤š Key ç®¡ç†åŠŸèƒ½ç¤ºä¾‹ç¨‹å¼ç¢¼

1.åœ¨è¨­å®š-æ¨¡å‹èˆ‡æœå‹™-MCPä¸‹æ–¹æ·»åŠ ä¸€å€‹LogcatæŸ¥çœ‹åŠŸèƒ½ï¼Œæ›´å¥½æ’æŸ¥è»Ÿé«”å‡ºç¾çš„å•é¡Œ
2.ç¹¼çºŒä¸Šå€‹ç‰ˆæœ¬v1.6.19çš„å°æ–¼èŠå¤©ä¸­base64åœ–ç‰‡çš„ä¿®å¾©ï¼Œç™¼ç¾æ˜¯èŠå¤©è³‡æ–™æ¨¡å‹å’Œåœ–ç‰‡è³‡æ–™æ¨¡å‹ä¸ä¸€è‡´å°è‡´çš„è¶Šç•Œå•é¡Œï¼ˆå¯èƒ½ï¼‰å’Œç¥ç§˜ç´¢å¼•å•é¡Œï¼ˆå¯èƒ½ï¼‰
| ä¿®å¾©å…§å®¹ | æª”æ¡ˆ | èªªæ˜ |
|---------|------|------|
| æ–°å¢ `safeCurrentMessage` å±¬æ€§ | `Conversation.kt` | å®‰å…¨ç²å–ç•¶å‰è¨Šæ¯ï¼Œè‡ªå‹•ä¿®æ­£è¶Šç•Œçš„ç´¢å¼• |
| æ–°å¢ `safeSelectIndex` å±¬æ€§ | `Conversation.kt` | ç²å–å®‰å…¨çš„é¸æ“‡ç´¢å¼• |
| ä¿®æ”¹ `currentMessages` ä½¿ç”¨ `safeCurrentMessage` | `Conversation.kt` | - |
| å°‡æ‰€æœ‰ `node.currentMessage` å‘¼å«æ”¹ç‚º `node.safeCurrentMessage` | `ChatList.kt` | - |
| å°‡ `node.messages[node.selectIndex]` æ”¹ç‚º `node.safeCurrentMessage` | `ChatMessage.kt` | - |
| åœ¨å¾è³‡æ–™åº«ååºåˆ—åŒ–æ™‚è‡ªå‹•ä¿®æ­£ç„¡æ•ˆçš„ `selectIndex` | `ConversationRepository.kt` | - |
| ä¿®å¾©ç§»é™¤ç„¡æ•ˆ tool call æ™‚çš„ç´¢å¼•å­˜å–å•é¡Œ | `ChatService.kt` | - |
//è²Œä¼¼ä¸¦æ²’æœ‰è§£æ±ºå•é¡Œï¼Œå˜—è©¦åœ¨ä¸‹å€‹ç‰ˆæœ¬ä¸­æ·»åŠ è·³å‡ºç”Ÿå‘½é€±æœŸçš„æ—¥èªŒè³‡æ–™æµä»¥è§£æ±ºå•é¡Œ


3.æ‡‰ç¾¤å‹ @é¡é¡æœˆæœˆ æè­°ï¼Œæ·»åŠ çŸ¥è­˜åº«åŠŸèƒ½ï¼Œå…·é«”çš„è‡ªå·±æ¸¬è©¦å³å¯ï¼Œè¦æœ‰ä¸€å€‹æ”¯æ´åµŒå…¥çš„æ¨¡å‹æä¾›ä½ çŸ¥è­˜åº«çš„ç´¢å¼•ï¼Œä¾‹å¦‚çŸ½åŸºæµå‹•æä¾›çš„BAAI/bge-large-zh-v1.5

<p align="center">
  <img src="https://github.com/user-attachments/assets/3983be1d-cfe5-4731-af28-a79d0232951f" alt="çŸ¥è­˜åº«åŠŸèƒ½æˆªåœ–" width="300" />
</p>

å¯«çš„å€‰ä¿ƒæ²’ä¾†å¾—åŠåŠ ä¸Šå·²ç¶“å¡«å¯«çš„çŸ¥è­˜åº«ä¿®æ”¹åŠŸèƒ½ï¼Œä»¥å¾Œç‰ˆæœ¬æœƒåŠ 
å¯¦ç¾ç‰¹é»ï¼š

### å±¤ç´šèªªæ˜

### 1. ä½¿ç”¨è€…ä»‹é¢å±¤
- **KnowledgePage** - çŸ¥è­˜åº«åˆ—è¡¨é é¢
- **KnowledgeDetailPage** - çŸ¥è­˜åº«è©³æƒ…é é¢
- **KnowledgeVM** - è¦–åœ–æ¨¡å‹

### 2. æœå‹™å±¤
- **KnowledgeService** - æ ¸å¿ƒæœå‹™ï¼Œè² è²¬è™•ç†ã€æœå°‹ã€ç®¡ç†

### 3. è³‡æ–™å±¤
| å…ƒä»¶ | åŠŸèƒ½ |
|------|------|
| DocumentLoader | æ–‡ä»¶è§£æ |
| TextChunker | æ–‡å­—åˆ†å¡Š |
| OpenAI Embedding | å‘é‡ç”Ÿæˆ |

### 4. å„²å­˜å±¤
- **Room Database (SQLite)** - å‘é‡ä»¥JSONå„²å­˜
- DAOå±¤ï¼š
  - `KnowledgeBaseDAO`
  - `KnowledgeItemDAO`
  - `KnowledgeChunkDAO`

âœ… ç´”æœ¬åœ°å¯¦ç¾ï¼Œç„¡éœ€å¤–éƒ¨å‘é‡è³‡æ–™åº«
âœ… ä½¿ç”¨Room/SQLiteå„²å­˜å‘é‡ï¼ˆJSONåºåˆ—åŒ–ï¼‰
âœ… æ”¯æ´å¤šç¨®æ–‡ä»¶æ ¼å¼ï¼ˆç´”æ–‡å­—ï¼‰
âœ… æ™ºæ…§æ–‡å­—åˆ†å¡Š
âœ… é¤˜å¼¦ç›¸ä¼¼åº¦æœå°‹
âš ï¸ æš´åŠ›æœå°‹ï¼ˆéæ­·æ‰€æœ‰å‘é‡ï¼‰ï¼Œé©åˆä¸­å°è¦æ¨¡çŸ¥è­˜åº«



# v1.6.21

### 1. åœ¨æ¨¡å‹åˆ—è¡¨é é¢çš„æ¯å€‹æ¨¡å‹æ¢ç›®ä¸Šæ·»åŠ äº†ä¸€å€‹Xåˆªé™¤æŒ‰éˆ•

**å…·é«”æ”¹å‹•ï¼š**
- **ä½ç½®ï¼š** æ¯å€‹æ¨¡å‹æ¢ç›®å³é‚Šï¼Œåœ¨èª¿æ§æŒ‰éˆ•ï¼ˆé½’è¼ªåœ–ç¤ºï¼‰çš„å·¦é‚Š
- **åŠŸèƒ½ï¼š** é»æ“ŠXæŒ‰éˆ•å¯ä»¥ç›´æ¥åˆªé™¤è©²æ¨¡å‹ï¼Œä¸éœ€è¦å†æ»‘å‹•åˆªé™¤äº†
- **åœ–ç¤ºï¼š** å’Œåº•éƒ¨ã€Œå¯ç”¨æ¨¡å‹ã€å½ˆçª—è£¡çš„Xåœ–ç¤ºä¸€æ¨£

**ç¾åœ¨ä½¿ç”¨è€…å¯ä»¥é€éå…©ç¨®æ–¹å¼åˆªé™¤æ¨¡å‹ï¼š**
1. é»æ“ŠXæŒ‰éˆ•ç›´æ¥åˆªé™¤ï¼ˆæ–°å¢ï¼‰
2. å‘å·¦æ»‘å‹•æ¢ç›®å¾Œé»æ“Šåˆªé™¤ï¼ˆåŸæœ‰åŠŸèƒ½ï¼‰

---

### 2. ä¿®å¾©å¤šKeyå°è©±æ™‚ä¸è¼ªè©¢çš„å•é¡Œ

**å•é¡Œç·£ç”±ï¼š** åœ¨ `KeyRoulette.kt` ä¸­ï¼Œè¼ªè©¢ç­–ç•¥ä½¿ç”¨äº† `keyManagement?.roundRobinIndex` ä¾†æ±ºå®šé¸æ“‡å“ªå€‹Keyï¼Œä½†æ˜¯é¸æ“‡å®ŒKeyå¾Œï¼Œæ²’æœ‰æ›´æ–° `roundRobinIndex`é€™æ„å‘³è‘—æ¯æ¬¡è«‹æ±‚éƒ½æœƒé¸æ“‡åŒä¸€å€‹Keyï¼ˆç´¢å¼•0ï¼‰ï¼Œè¼ªè©¢åŠŸèƒ½å¯¦éš›ä¸Šä¸æœƒå·¥ä½œã€‚

**ä¿®å¾©æ–¹å¼ï¼š**

**KeyRoulette.kt**
- ä½¿ç”¨è¨˜æ†¶é«”ä¸­çš„ `roundRobinIndexMap` ä¾†ç¶­è­·æ¯å€‹Providerçš„è¼ªè©¢ç´¢å¼•
- æ¯æ¬¡é¸æ“‡Keyå¾Œï¼Œè‡ªå‹•å°‡ç´¢å¼•+1
- ä½¿ç”¨ç¬¬ä¸€å€‹Keyçš„IDä½œç‚ºProvideræ¨™è­˜

**ApiKeyConfig.kt**
- åœ¨ `KeySelectionResult` ä¸­æ·»åŠ äº† `nextRoundRobinIndex` æ¬„ä½ï¼ˆå‚™ç”¨ï¼Œæ–¹ä¾¿æœªä¾†æŒä¹…åŒ–ï¼‰

**ä¿®å¾©å¾Œçš„æ•ˆæœï¼š**
- ç¬¬1æ¬¡è«‹æ±‚ â†’ é¸æ“‡Key 0
- ç¬¬2æ¬¡è«‹æ±‚ â†’ é¸æ“‡Key 1
- ç¬¬3æ¬¡è«‹æ±‚ â†’ é¸æ“‡Key 2
- ...ä¾æ­¤é¡æ¨ï¼Œå¾ªç’°è¼ªè©¢

---

### 3. å¤šKeyç®¡ç†é è¨­é–‹å•Ÿä¸²æµæ¨¡å¼

è¨­å®š-ä¾›æ‡‰å•†-ä»»æ„ä¾›æ‡‰å•†-å¤šKeyç®¡ç† éƒ¨åˆ†é è¨­é–‹å•Ÿä½¿ç”¨ä¸²æµæ¨¡å¼ï¼Œæè¿°ç‚ºé©—è­‰SSEä¸²æµå›æ‡‰ï¼ˆé–‹å•Ÿå¾Œå¯ä»¥æ›´å¿«åœ°é©—è­‰Keyæ˜¯å¦å¯ç”¨ï¼‰

---

### 4. Logcatè³‡æ–™æµå„²å­˜åŠŸèƒ½

ç‚ºå®Œå…¨ä¿®å¾©ç”Ÿåœ–å°è©±å’Œæ™®é€šå°è©±åˆ‡æ›è³‡æ–™æ¨¡å‹æ™‚çš„ç´¢å¼•è¶Šç•Œå•é¡Œåšæº–å‚™ï¼Œåœ¨logcatæŸ¥çœ‹é é¢ä¸­æ·»åŠ äº†è³‡æ–™æµå„²å­˜åŠŸèƒ½ï¼Œlogcatæœƒå³æ™‚å„²å­˜åˆ°ä½¿ç”¨è€…é¸æ“‡çš„ä½ç½®ï¼Œä½¿ç”¨è€…å¯ä»¥è‡ªè¡Œé‡æ–°å‘½åï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é è¨­é…ç½® `/storage/emulated/0/1RikkaHubX/Logcat.txt`
Logcatæ—¥èªŒè¼¸å‡ºç‚ºæª”æ¡ˆç‚ºå¯é¸é¸é …ï¼Œä¿®æ”¹Logcatæ—¥èªŒé é¢å³ä¸Šè§’çš„å…­å€‹åŠŸèƒ½æŒ‰éˆ•ï¼Œä¿®æ”¹çš„æ›´å°ä¸€é»


# 1.6.22
### æ–°åŠŸèƒ½
- **å¤šèªè¨€æ”¯æ´**ï¼š
  - ç¾åœ¨å¯ä»¥åœ¨`è¨­å®š - æ¨¡å‹èˆ‡æœå‹™ - èªè¨€`ä¸­åˆ‡æ›èªè¨€
  - æ–°å¢æ”¯æ´é¦™æ¸¯/æ¾³é–€åœ°å€çš„ç¹é«”ä¸­æ–‡
  
  *é–‹ç™¼è€…èªªæ˜*ï¼š
  ä½¿ç”¨`AppCompatDelegate.setApplicationLocales()`å¯¦ç¾æ‡‰ç”¨å…§èªè¨€åˆ‡æ›
  é‡å°Android 13+ç³»çµ±éœ€é…ç½®`localeConfig`

## Bugä¿®å¾©
- **ä¿®å¾©äºŒç¶­ç¢¼åˆ†äº«å•é¡Œ**ï¼š
- å•é¡Œç¾è±¡ï¼š
  åœ¨`è¨­å®š > ä¾›æ‡‰å•†`çš„ä»»æ„ä¾›æ‡‰å•†è¨­å®šä¸­ï¼š
  é»æ“Šå³ä¸Šè§’åˆ†äº«æŒ‰éˆ• â†’ "å…±äº«ä½ çš„LLMæ¨¡å‹" â†’ é¸æ“‡QQæ™‚ï¼Œæœƒç™¼å‡º`ai-provider:v1:base64`æ ¼å¼çš„ç·¨ç¢¼æ–‡å­—ï¼Œè€Œä¸æ˜¯é¡¯ç¤ºçš„äºŒç¶­ç¢¼
    
- ä¿®å¾©çµæœï¼š
  ç¾åœ¨æœƒæ­£ç¢ºåˆ†äº«äºŒç¶­ç¢¼åœ–ç‰‡åˆ°QQæˆ–å…¶ä»–æ‡‰ç”¨

# 1.6.23

### 1. æ–°å¢ä»¥ä¸‹è³‡æ–™çš„å‚™ä»½åŠŸèƒ½ï¼š

- çŸ¥è­˜åº«è³‡æ–™
- Logcat æŸ¥çœ‹è¨­å®š
- èªè¨€è¨­å®šï¼ˆæ”¯æ´é¦™æ¸¯/æ¾³é–€ç¹é«”ä¸­æ–‡ï¼‰
- é è¨­åŠ©æ‰‹çš„æœ¬åœ°å·¥å…·é–‹é—œï¼ˆæª”æ¡ˆç³»çµ±ã€ç¶²é è®€å–ï¼‰
- å¤š API Key è¨­å®šå’Œå„²å­˜è³‡æ–™

---

**é–‹ç™¼è€…èªªæ˜**ï¼š
| åŠŸèƒ½             | å„²å­˜ä½ç½®                             | å‚™ä»½æ–¹å¼      | ç¨‹å¼ç¢¼ä½ç½®           |
|------------------|--------------------------------------|---------------|--------------------|
| çŸ¥è­˜åº«è³‡æ–™       | Room è³‡æ–™åº«                          | rikka_hub.db  | WebdavSync.kt      |
| çŸ¥è­˜åº«å¼•ç”¨       | Assistant.knowledgeBases             | settings.json | Assistant.kt       |
| æœ¬åœ°å·¥å…·é–‹é—œ     | Assistant.localTools                 | settings.json | Assistant.kt       |
| å¤š API Key åˆ—è¡¨  | ProviderSetting.apiKeys              | settings.json | ProviderSetting.kt |
| Key ç®¡ç†é…ç½®     | ProviderSetting.keyManagement        | settings.json | ProviderSetting.kt |
| Key ä½¿ç”¨çµ±è¨ˆ     | ApiKeyConfig.usage                   | settings.json | ApiKeyConfig.kt    |
| è² è¼‰å‡è¡¡ç­–ç•¥     | KeyManagementConfig.strategy         | settings.json | ApiKeyConfig.kt    |
| è¼ªè©¢ç´¢å¼•         | KeyManagementConfig.roundRobinIndex  | settings.json | ApiKeyConfig.kt    |

# 1.6.24
### 1.çŸ¥è­˜åº«ä¸­çš„å…§å®¹æ”¯æ´å„²å­˜å¾Œä¿®æ”¹
### 2.èŠå¤©è¼¸å…¥æ¡†åº•éƒ¨æ·»åŠ äº†æœ¬åœ°å·¥å…·é–‹é—œåŠŸèƒ½

æˆ‘æ„Ÿè¦ºæŠŠæ›´æ–°æ—¥èªŒå¯«releaseè£¡é¢ä¸æ–¹ä¾¿æˆ‘å°±å¯«readme.mdäº†

è¦ºå¾—æœ¬å°ˆæ¡ˆå¥½è«‹é»ä¸€å€‹â­Star

## ğŸ“„ æˆæ¬Šæ¢æ¬¾

[License](LICENSE)
