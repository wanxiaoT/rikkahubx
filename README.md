ç®€ä½“ä¸­æ–‡ | [ç¹é«”ä¸­æ–‡](README_ZH_TW.md) | [English](README_EN.md)

<div align="center">
  <img src="docs/icon.png" alt="App å›¾æ ‡" width="100" />
  <h1>RikkaHubX</h1>

> [!WARNING] è¿™ä¸æ˜¯å—åˆ° RikkaHubå®˜æ–¹ æ”¯æŒçš„ç‰ˆæœ¬ï¼

ä¸åŸé¡¹ç›®æœ‰å…³çš„å†…å®¹è¯·å‰å¾€[RikkaHub-Github](https://github.com/rikkahub/rikkahub)

ä¸€ä¸ªåŸç”ŸAndroid LLM èŠå¤©å®¢æˆ·ç«¯ï¼Œæ”¯æŒåˆ‡æ¢ä¸åŒçš„ä¾›åº”å•†è¿›è¡ŒèŠå¤© ğŸ¤–ğŸ’¬




æœ¬é¡¹ç›®Forkè‡ªRikkaHub 1.6.15ï¼Œæœ¬é¡¹ç›®æ”¯æŒå¯¹äºæœ¬é¡¹ç›®çš„PRï¼ˆè¯´æ˜æ¸…æ¥šï¼Œæ²¡ç—…æ¯’å°±è¡Œï¼Œå› ä¸ºæˆ‘æ‡’ ï¼‰

RikkaHubXçš„ä½œè€…æ˜¯å¤§é™†äººï¼Œäº¤æµæœ€å¥½ç”¨ç®€ä½“ä¸­æ–‡



RikkaHubXæ˜¯RikkaHubçš„ç‹¬ç«‹åˆ†æ”¯ï¼Œåœ¨RikkaHubçš„åŸºç¡€ä¸Šæ·»åŠ äº†éƒ¨åˆ†ä¿®æ”¹åŠŸèƒ½ï¼Œä¸ä¼šæäº¤PRç»™åŸé¡¹ç›®

[RikkaHubX](https://github.com/wanxiaoT/rikkahubx) By [wanxiaoT](https://github.com/wanxiaoT)

# v1.6.18

æ„Ÿè°¢ [Kelivo](https://github.com/Chevey339/kelivo/) æä¾›çš„å¤š Key ç®¡ç†åŠŸèƒ½ç¤ºä¾‹ä»£ç 

æ–‡ä»¶è·¯å¾„             | è¯´æ˜
-------|--------------------
kelivo-master\lib\core\models\api_keys.dart | æ•°æ®æ¨¡å‹ - å®šä¹‰æ ¸å¿ƒæ•°æ®ç»“æ„
kelivo-master\lib\core\services\api_key_manager.dart | æ ¸å¿ƒæœåŠ¡ - Key é€‰æ‹©é€»è¾‘å’ŒçŠ¶æ€æ›´æ–°
kelivo-master\lib\features\provider\pages\multi_key_manager_page.dart | UI é¡µé¢ - å¤š Key ç®¡ç†ç•Œé¢

å¤šKeyè½®è¯¢åœ¨è¿™ä¸ªç‰ˆæœ¬é‡Œé¢ä¸èƒ½æ­£ç¡®ä½¿ç”¨åˆ°èŠå¤©ä¸­ï¼Œè¿™ä¸ªç‰ˆæœ¬çš„å¯†é’¥å¥åº·åº¦æ£€æµ‹ä¹Ÿæ˜¯å•çº¿ç¨‹çš„ï¼Œè¯·æŸ¥çœ‹1.6.22ç‰ˆæœ¬


# v1.6.19

| åºå· | æ›´æ–°å†…å®¹ |
|:---:|----------|
| 1 | ä» rikkahub å®˜æ–¹ v1.6.16 æå– token/tps è®°å½•åŠŸèƒ½æ’å…¥æ–°ç‰ˆæºç  |
| 2 | ä¿®å¤å­˜åœ¨é—®é¢˜çš„ base64 å›¾ç‰‡ä¼ è¾“ï¼Œè½¬ä¸ºä½¿ç”¨æ–‡ä»¶å­˜å‚¨ã€‚åŸæœ‰ç‰ˆæœ¬çš„å›¾ç‰‡åœ¨æœ¬åœ°æ˜¯ç”¨ SQL æ•°æ®åº“å­˜çš„ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯ä¸æ˜¯çœŸçš„ä¿®å¤äº†ï¼Œè¿˜å¾—ç”¨æˆ·è‡ªå·±æµ‹è¯•ï¼Œå› ä¸ºæˆ‘æ²¡æœ‰ç”»å›¾çš„ api |



# v1.6.20
æ„Ÿè°¢ [CherryStudio v1.7.5](https://github.com/Chevey339/kelivo/) æä¾›çš„å¤š Key ç®¡ç†åŠŸèƒ½ç¤ºä¾‹ä»£ç 

1.åœ¨è®¾ç½®-æ¨¡å‹ä¸æœåŠ¡-MCPä¸‹æ–¹æ·»åŠ ä¸€ä¸ªLogcatæŸ¥çœ‹åŠŸèƒ½ï¼Œæ›´å¥½æ’æŸ¥è½¯ä»¶å‡ºç°çš„é—®é¢˜
2.ç»§ç»­ä¸Šä¸ªç‰ˆæœ¬v1.6.19çš„å¯¹äºèŠå¤©ä¸­base64å›¾ç‰‡çš„ä¿®å¤ï¼Œå‘ç°æ˜¯èŠå¤©æ•°æ®æ¨¡å‹å’Œå›¾ç‰‡æ•°æ®æ¨¡å‹ä¸ä¸€è‡´å¯¼è‡´çš„è¶Šç•Œé—®é¢˜ï¼ˆå¯èƒ½ï¼‰å’Œç¥ç§˜ç´¢å¼•é—®é¢˜ï¼ˆå¯èƒ½ï¼‰
| ä¿®å¤å†…å®¹ | æ–‡ä»¶ | è¯´æ˜ |
|---------|------|------|
| æ–°å¢ `safeCurrentMessage` å±æ€§ | `Conversation.kt` | å®‰å…¨è·å–å½“å‰æ¶ˆæ¯ï¼Œè‡ªåŠ¨ä¿®æ­£è¶Šç•Œçš„ç´¢å¼• |
| æ–°å¢ `safeSelectIndex` å±æ€§ | `Conversation.kt` | è·å–å®‰å…¨çš„é€‰æ‹©ç´¢å¼• |
| ä¿®æ”¹ `currentMessages` ä½¿ç”¨ `safeCurrentMessage` | `Conversation.kt` | - |
| å°†æ‰€æœ‰ `node.currentMessage` è°ƒç”¨æ”¹ä¸º `node.safeCurrentMessage` | `ChatList.kt` | - |
| å°† `node.messages[node.selectIndex]` æ”¹ä¸º `node.safeCurrentMessage` | `ChatMessage.kt` | - |
| åœ¨ä»æ•°æ®åº“ååºåˆ—åŒ–æ—¶è‡ªåŠ¨ä¿®æ­£æ— æ•ˆçš„ `selectIndex` | `ConversationRepository.kt` | - |
| ä¿®å¤ç§»é™¤æ— æ•ˆ tool call æ—¶çš„ç´¢å¼•è®¿é—®é—®é¢˜ | `ChatService.kt` | - |
//è²Œä¼¼å¹¶æ²¡æœ‰è§£å†³é—®é¢˜ï¼Œå°è¯•åœ¨ä¸‹ä¸ªç‰ˆæœ¬ä¸­æ·»åŠ è·³å‡ºç”Ÿå‘½å‘¨æœŸçš„æ—¥å¿—æ•°æ®æµä»¥è§£å†³é—®é¢˜


3.åº”ç¾¤å‹ @é•œé•œæœˆæœˆ æè®®ï¼Œæ·»åŠ çŸ¥è¯†åº“åŠŸèƒ½ï¼Œå…·ä½“çš„è‡ªå·±æµ‹è¯•å³å¯ï¼Œè¦æœ‰ä¸€ä¸ªæ”¯æŒåµŒå…¥çš„æ¨¡å‹æä¾›ä½ çŸ¥è¯†åº“çš„ç´¢å¼•ï¼Œä¾‹å¦‚ç¡…åŸºæµåŠ¨æä¾›çš„BAAI/bge-large-zh-v1.5

<p align="center">
  <img src="https://github.com/user-attachments/assets/3983be1d-cfe5-4731-af28-a79d0232951f" alt="çŸ¥è¯†åº“åŠŸèƒ½æˆªå›¾" width="300" />
</p>

å†™çš„ä»“ä¿ƒæ²¡æ¥å¾—åŠåŠ ä¸Šå·²ç»å¡«å†™çš„çŸ¥è¯†åº“ä¿®æ”¹åŠŸèƒ½ï¼Œä»¥åç‰ˆæœ¬ä¼šåŠ 
å®ç°ç‰¹ç‚¹ï¼š

### å±‚çº§è¯´æ˜

### 1. ç”¨æˆ·ç•Œé¢å±‚
- **KnowledgePage** - çŸ¥è¯†åº“åˆ—è¡¨é¡µé¢
- **KnowledgeDetailPage** - çŸ¥è¯†åº“è¯¦æƒ…é¡µé¢
- **KnowledgeVM** - è§†å›¾æ¨¡å‹

### 2. æœåŠ¡å±‚
- **KnowledgeService** - æ ¸å¿ƒæœåŠ¡ï¼Œè´Ÿè´£å¤„ç†ã€æœç´¢ã€ç®¡ç†

### 3. æ•°æ®å±‚
| ç»„ä»¶ | åŠŸèƒ½ |
|------|------|
| DocumentLoader | æ–‡æ¡£è§£æ |
| TextChunker | æ–‡æœ¬åˆ†å— |
| OpenAI Embedding | å‘é‡ç”Ÿæˆ |

### 4. å­˜å‚¨å±‚
- **Room Database (SQLite)** - å‘é‡ä»¥JSONå­˜å‚¨
- DAOå±‚ï¼š
  - `KnowledgeBaseDAO`
  - `KnowledgeItemDAO`
  - `KnowledgeChunkDAO`

âœ… çº¯æœ¬åœ°å®ç°ï¼Œæ— éœ€å¤–éƒ¨å‘é‡æ•°æ®åº“
âœ… ä½¿ç”¨Room/SQLiteå­˜å‚¨å‘é‡ï¼ˆJSONåºåˆ—åŒ–ï¼‰
âœ… æ”¯æŒå¤šç§æ–‡æ¡£æ ¼å¼ï¼ˆçº¯æ–‡æœ¬ï¼‰
âœ… æ™ºèƒ½æ–‡æœ¬åˆ†å—
âœ… ä½™å¼¦ç›¸ä¼¼åº¦æœç´¢
âš ï¸ æš´åŠ›æœç´¢ï¼ˆéå†æ‰€æœ‰å‘é‡ï¼‰ï¼Œé€‚åˆä¸­å°è§„æ¨¡çŸ¥è¯†åº“



# v1.6.21

### 1. åœ¨æ¨¡å‹åˆ—è¡¨é¡µé¢çš„æ¯ä¸ªæ¨¡å‹æ¡ç›®ä¸Šæ·»åŠ äº†ä¸€ä¸ªXåˆ é™¤æŒ‰é’®

**å…·ä½“æ”¹åŠ¨ï¼š**
- **ä½ç½®ï¼š** æ¯ä¸ªæ¨¡å‹æ¡ç›®å³è¾¹ï¼Œåœ¨è°ƒæ§æŒ‰é’®ï¼ˆé½¿è½®å›¾æ ‡ï¼‰çš„å·¦è¾¹
- **åŠŸèƒ½ï¼š** ç‚¹å‡»XæŒ‰é’®å¯ä»¥ç›´æ¥åˆ é™¤è¯¥æ¨¡å‹ï¼Œä¸éœ€è¦å†æ»‘åŠ¨åˆ é™¤äº†
- **å›¾æ ‡ï¼š** å’Œåº•éƒ¨"å¯ç”¨æ¨¡å‹"å¼¹çª—é‡Œçš„Xå›¾æ ‡ä¸€æ ·

**ç°åœ¨ç”¨æˆ·å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼åˆ é™¤æ¨¡å‹ï¼š**
1. ç‚¹å‡»XæŒ‰é’®ç›´æ¥åˆ é™¤ï¼ˆæ–°å¢ï¼‰
2. å‘å·¦æ»‘åŠ¨æ¡ç›®åç‚¹å‡»åˆ é™¤ï¼ˆåŸæœ‰åŠŸèƒ½ï¼‰

---

### 2. ä¿®å¤å¤šKeyå¯¹è¯æ—¶ä¸è½®è¯¢çš„é—®é¢˜

**é—®é¢˜ç¼˜ç”±ï¼š** åœ¨ `KeyRoulette.kt` ä¸­ï¼Œè½®è¯¢ç­–ç•¥ä½¿ç”¨äº† `keyManagement?.roundRobinIndex` æ¥å†³å®šé€‰æ‹©å“ªä¸ªKeyï¼Œä½†æ˜¯é€‰æ‹©å®ŒKeyåï¼Œæ²¡æœ‰æ›´æ–° `roundRobinIndex`è¿™æ„å‘³ç€æ¯æ¬¡è¯·æ±‚éƒ½ä¼šé€‰æ‹©åŒä¸€ä¸ªKeyï¼ˆç´¢å¼•0ï¼‰ï¼Œè½®è¯¢åŠŸèƒ½å®é™…ä¸Šä¸ä¼šå·¥ä½œã€‚

**ä¿®å¤æ–¹å¼ï¼š**

**KeyRoulette.kt**
- ä½¿ç”¨å†…å­˜ä¸­çš„ `roundRobinIndexMap` æ¥ç»´æŠ¤æ¯ä¸ªProviderçš„è½®è¯¢ç´¢å¼•
- æ¯æ¬¡é€‰æ‹©Keyåï¼Œè‡ªåŠ¨å°†ç´¢å¼•+1
- ä½¿ç”¨ç¬¬ä¸€ä¸ªKeyçš„IDä½œä¸ºProvideræ ‡è¯†

**ApiKeyConfig.kt**
- åœ¨ `KeySelectionResult` ä¸­æ·»åŠ äº† `nextRoundRobinIndex` å­—æ®µï¼ˆå¤‡ç”¨ï¼Œæ–¹ä¾¿æœªæ¥æŒä¹…åŒ–ï¼‰

**ä¿®å¤åçš„æ•ˆæœï¼š**
- ç¬¬1æ¬¡è¯·æ±‚ â†’ é€‰æ‹©Key 0
- ç¬¬2æ¬¡è¯·æ±‚ â†’ é€‰æ‹©Key 1
- ç¬¬3æ¬¡è¯·æ±‚ â†’ é€‰æ‹©Key 2
- ...ä¾æ­¤ç±»æ¨ï¼Œå¾ªç¯è½®è¯¢

---

### 3. å¤šKeyç®¡ç†é»˜è®¤å¼€å¯æµå¼æ¨¡å¼

è®¾ç½®-æä¾›å•†-ä»»æ„æä¾›å•†-å¤šKeyç®¡ç† éƒ¨åˆ†é»˜è®¤å¼€å¯ä½¿ç”¨æµå¼æ¨¡å¼ï¼Œæè¿°ä¸ºéªŒè¯SSEæµå¼å“åº”ï¼ˆå¼€å¯åå¯ä»¥æ›´å¿«åœ°éªŒè¯Keyæ˜¯å¦å¯ç”¨ï¼‰

---

### 4. Logcatæ•°æ®æµä¿å­˜åŠŸèƒ½

ä¸ºå®Œå…¨ä¿®å¤ç”Ÿå›¾å¯¹è¯å’Œæ™®é€šå¯¹è¯åˆ‡æ¢æ•°æ®æ¨¡å‹æ—¶çš„ç´¢å¼•è¶Šç•Œé—®é¢˜åšå‡†å¤‡ï¼Œåœ¨logcatæŸ¥çœ‹é¡µé¢ä¸­æ·»åŠ äº†æ•°æ®æµä¿å­˜åŠŸèƒ½ï¼Œlogcatä¼šå®æ—¶ä¿å­˜åˆ°ç”¨æˆ·é€‰æ‹©çš„ä½ç½®ï¼Œç”¨æˆ·å¯ä»¥è‡ªè¡Œé‡å‘½åï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤é…ç½® `/storage/emulated/0/1RikkaHubX/Logcat.txt`
Logcatæ—¥å¿—è¾“å‡ºä¸ºæ–‡ä»¶ä¸ºå¯é€‰é€‰é¡¹ï¼Œä¿®æ”¹Logcatæ—¥å¿—é¡µé¢å³ä¸Šè§’çš„å…­ä¸ªåŠŸèƒ½æŒ‰é’®ï¼Œä¿®æ”¹çš„æ›´å°ä¸€ç‚¹


# 1.6.22
### æ–°åŠŸèƒ½
- **å¤šè¯­è¨€æ”¯æŒ**ï¼š
  - ç°åœ¨å¯ä»¥åœ¨`è®¾ç½® - æ¨¡å‹ä¸æœåŠ¡ - è¯­è¨€`ä¸­åˆ‡æ¢è¯­è¨€
  - æ–°å¢æ”¯æŒé¦™æ¸¯/æ¾³é—¨åœ°åŒºçš„ç¹ä½“ä¸­æ–‡
  
  **å¼€å‘è€…è¯´æ˜**ï¼š  
  ä½¿ç”¨`AppCompatDelegate.setApplicationLocales()`å®ç°åº”ç”¨å†…è¯­è¨€åˆ‡æ¢  
  é’ˆå¯¹Android 13+ç³»ç»Ÿéœ€é…ç½®`localeConfig`

### Bugä¿®å¤
- **ä¿®å¤äºŒç»´ç åˆ†äº«é—®é¢˜**ï¼š
- é—®é¢˜ç°è±¡ï¼š  
  åœ¨`è®¾ç½® > æä¾›å•†`çš„ä»»æ„æä¾›å•†è®¾ç½®ä¸­ï¼š  
  ç‚¹å‡»å³ä¸Šè§’åˆ†äº«æŒ‰é’® â†’ "å…±äº«ä½ çš„LLMæ¨¡å‹" â†’ é€‰æ‹©QQæ—¶ï¼Œä¼šå‘å‡º`ai-provider:v1:base64`æ ¼å¼çš„ç¼–ç æ–‡æœ¬ï¼Œè€Œä¸æ˜¯æ˜¾ç¤ºçš„äºŒç»´ç 
    
- ä¿®å¤ç»“æœï¼š  
  ç°åœ¨ä¼šæ­£ç¡®åˆ†äº«äºŒç»´ç å›¾ç‰‡åˆ°QQæˆ–å…¶ä»–åº”ç”¨

# 1.6.23

### 1. æ–°å¢ä»¥ä¸‹æ•°æ®çš„å¤‡ä»½åŠŸèƒ½ï¼š

- çŸ¥è¯†åº“æ•°æ®
- Logcat æŸ¥çœ‹è®¾ç½®
- è¯­è¨€è®¾ç½®ï¼ˆæ”¯æŒé¦™æ¸¯/æ¾³é—¨ç¹ä½“ä¸­æ–‡ï¼‰
- é»˜è®¤åŠ©æ‰‹çš„æœ¬åœ°å·¥å…·å¼€å…³ï¼ˆæ–‡ä»¶ç³»ç»Ÿã€ç½‘é¡µè¯»å–ï¼‰
- å¤š API Key è®¾ç½®å’Œå­˜å‚¨æ•°æ®

---

**å¼€å‘è€…è¯´æ˜**ï¼š
| åŠŸèƒ½             | å­˜å‚¨ä½ç½®                             | å¤‡ä»½æ–¹å¼      | ä»£ç ä½ç½®           |
|------------------|--------------------------------------|---------------|--------------------|
| çŸ¥è¯†åº“æ•°æ®       | Room æ•°æ®åº“                          | rikka_hub.db  | WebdavSync.kt      |
| çŸ¥è¯†åº“å¼•ç”¨       | Assistant.knowledgeBases             | settings.json | Assistant.kt       |
| æœ¬åœ°å·¥å…·å¼€å…³     | Assistant.localTools                 | settings.json | Assistant.kt       |
| å¤š API Key åˆ—è¡¨  | ProviderSetting.apiKeys              | settings.json | ProviderSetting.kt |
| Key ç®¡ç†é…ç½®     | ProviderSetting.keyManagement        | settings.json | ProviderSetting.kt |
| Key ä½¿ç”¨ç»Ÿè®¡     | ApiKeyConfig.usage                   | settings.json | ApiKeyConfig.kt    |
| è´Ÿè½½å‡è¡¡ç­–ç•¥     | KeyManagementConfig.strategy         | settings.json | ApiKeyConfig.kt    |
| è½®è¯¢ç´¢å¼•         | KeyManagementConfig.roundRobinIndex  | settings.json | ApiKeyConfig.kt    |


æˆ‘æ„Ÿè§‰æŠŠæ›´æ–°æ—¥å¿—å†™releaseé‡Œé¢ä¸æ–¹ä¾¿æˆ‘å°±å†™readme.mdäº†

è§‰å¾—æœ¬é¡¹ç›®å¥½è¯·ç‚¹ä¸€ä¸ªâ­Star

## ğŸ“„ è®¸å¯è¯

[License](LICENSE)